<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    {% load static %}
    <link href="{% static 'admin/css/whatsapp_admin.css' %}" rel="stylesheet">
</head>
<body>
<h1>{{ header }}</h1>

<h2>Estado del Cliente WhatsApp</h2>
<p>
    Estado: <strong id="status-text">{{ client_status.status|default:"Desconocido" }}</strong><br>
    Conectado:
    <strong id="connected-text" style="color: {{ client_status.connected|yesno:'#2a9d8f,#e63946' }}">
        {{ client_status.connected|yesno:"SÃ­,No" }}
    </strong>
</p>

<div id="dynamic-alerts">
    {% if status_message %}
    <div class="status">{{ status_message }}</div>
    {% endif %}

    {% if error_qr %}
    <div class="error">{{ error_qr }}</div>
    {% endif %}
</div>

<div class="qr" id="qr-container">
    {% if qr_data_url %}
    <h2>Escanea este cÃ³digo QR</h2>
    <img id="qr-image" alt="QR Code" src="{{ qr_data_url }}">
    {% else %}
    <p id="no-qr">No hay QR disponible (probablemente el cliente ya estÃ¡ conectado).</p>
    {% endif %}
</div>

<form method="post">
    {% csrf_token %}
    <button class="btn" name="reset" type="submit">ðŸ”„ Reiniciar sesiÃ³n de WhatsApp</button>
</form>

<script>
    const NODE_BASE_URL = "http://localhost:3000";
</script>
<script src="{% static 'admin/js/whatsapp_status.js' %}" defer></script>

</body>
</html>
